name: Discord-Clone Tests

on:
 push:
   branches:
     - master
 pull_request:
   branches:
     - master
 workflow_dispatch:

jobs:
 test:
   runs-on: ubuntu-latest

   steps:
     # Checkout the repository
     - name: Checkout code
       uses: actions/checkout@v3

     # Set up .NET
     - name: Setup .NET
       uses: actions/setup-dotnet@v3
       with:
         dotnet-version: '9.0.x'

     # Restore dependencies
     - name: Restore dependencies
       run: dotnet restore ./src/Discord-Clone.Server

     # Build the application
     - name: Build application
       run: dotnet build ./src/Discord-Clone.Server --configuration Release --no-restore

     # Run tests
     - name: Run tests
       run: dotnet test ./src/Discord-Clone.Server --no-build --verbosity normal